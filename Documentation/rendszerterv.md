# Rendszerterv

## 9. Adatbázis terv

### Az adatbázis UML modellje

![Adatbázis UML Diagram](https://raw.githubusercontent.com/teaisawesome/SZFM_2020_10_SZFM-Weboldal/master/Documentation/resources/images/DB_UML_Diagram.png "Adatbázis UML Diagram")

### Tárolt eljárások

Tárolt eljárásokat nem fogunk alkalmazni.

### Fizikai adatmodellt legeneráló SQL szkript

```sql
CREATE TABLE USERS(
    ID NUMBER NOT NULL AUTO_INCREMENT,
    UNAME VARCHAR(60) NOT NULL,
    USERNAME VARCHAR(40) NOT NULL,
    UADDRESS VARHCAR(80) NOT NULL,
    EMAIL VARCHAR(60) NOT NULL,
    PHONE_NUMBER NUMBER NOT NULL,
    RANK_ID NUMBER,
    PRIMARY KEY (ID),
    CONSTRAINT FK_RANK_ID FOREIGN KEY (RANK_ID)
    REFERENCES RANKS(ID)
);

CREATE TABLE RANKS(
    ID NUMBER NOT NULL AUTO_INCREMENT,
    RNAME VARCHAR(20),
    PRIMARY KEY (ID)
);

CREATE TABLE CARDS(
    ID NUMBER NOT NULL AUTO_INCREMENT,
    USER_ID NUMBER,
    CARD_NUMBER NUMBER NOT NULL,
    PRIMARY KEY (ID),
    CONSTRAINT FK_USER_ID FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE TABLE WAGES(
    ID NUMBER NOT NULL AUTO_INCREMENT,
    USER_ID NUMBER,
    WAGE NUMBER,
    PRIMARY KEY (ID),
    CONSTRAINT FK_USER_ID FOREIGN KEY (USER_ID) REFERENCES USERS(ID)
);

CREATE TABLE FORUM(
    ID NUMBER NOT NULL AUTO_INCREMENT,
    USER_ID NUMBER,
    CONTENT VARCHAR(400),
    PRIMARY KEY (ID),
    CONSTRAINT FK_USER_ID FOREIGN KEY (USER_ID) REFERENCES USERS(ID)    
);
```